import{d as e,c as a,o as l,a as t,r,b as o,E as s,e as d,f as n,g as u,w as i,h as c,v,t as p,u as m,i as y,j as f,k as g,l as h,m as b,n as w,p as _,q as x,s as k,x as C,y as V,z as A,A as N,F as T,B as R,C as S,D as B,G as O,H as U,I as M,J as L,K as P,L as D,M as K,N as $,O as z,P as E,Q as q,R as I,S as j,T as F,U as W,V as J,W as Y,X as Z,Y as H,Z as G,_ as Q,$ as X,a0 as ee,a1 as ae,a2 as le,a3 as te,a4 as re,a5 as oe,a6 as se,a7 as de,a8 as ne,a9 as ue,aa as ie,ab as ce,ac as ve,ad as pe}from"./vendor-BEsXgqw2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const me={id:"app"},ye=(e,a)=>{const l=e.__vccOpts||e;for(const[t,r]of a)l[t]=r;return l},fe=ye(e({__name:"App",setup:e=>(e,o)=>{const s=r("router-view");return l(),a("div",me,[t(s)])}}),[["__scopeId","data-v-db71e853"]]),ge=o.create({baseURL:"http://39.97.35.247:80",timeout:1e4,withCredentials:!0,headers:{"Content-Type":" application/json"}});ge.interceptors.request.use(e=>{{const a=localStorage.getItem("token");a&&(e.headers.Authorization=`Bearer ${a}`)}return e},e=>Promise.reject(e)),ge.interceptors.response.use(e=>e.data,e=>{var a;let l="请求失败，请稍后重试";if(e.response)switch(e.response.status){case 401:l="未授权，请重新登录",window.location.href="/login";break;case 403:l="权限不足，无法访问";break;case 404:l="请求的资源不存在";break;case 500:l="服务器内部错误";break;default:l=(null==(a=e.response.data)?void 0:a.message)||"请求失败"}else e.request&&(l="网络错误，请检查网络连接");return s.error(l),Promise.reject(e)});class he{static async login(e,a){return await ge.post("/user/login",{username:e,password:a})}static async register(e){return await ge.post("/user/register",e)}static async logout(){return await ge.post("/user/logout")}static async test(e){return await ge.get("/user/test",{params:{str:e}})}static async getCurrentUser(){return await ge.get("/user/info")}static async updateUserInfo(e){return await ge.put("/user/info",e)}static async changePassword(e,a){return await ge.post("/user/change-password",{oldPassword:e,newPassword:a})}static async getUserList(){return await ge.get("/user/list")}}const be={class:"login-container"},we={class:"login-form"},_e={class:"form-group"},xe={class:"form-group"},ke={key:0,class:"error-message"},Ce=ye(e({__name:"login",setup(e){const t=d(""),r=d(""),o=d(""),s=m(),y=async()=>{try{o.value="";const e=await he.login(t.value,r.value);200===e.code&&e.data?(localStorage.setItem("token",e.data),s.push("/index")):o.value=e.msg||"登录失败，请检查用户名和密码"}catch(e){o.value="网络错误，请稍后重试"}};return(e,s)=>(l(),a("div",be,[n("div",we,[s[5]||(s[5]=n("h2",null,"会员管理 - BuildAdmin",-1)),n("form",{onSubmit:i(y,["prevent"])},[n("div",_e,[s[2]||(s[2]=n("label",{for:"username"},"用户名",-1)),c(n("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),placeholder:"请输入用户名",required:""},null,512),[[v,t.value]])]),n("div",xe,[s[3]||(s[3]=n("label",{for:"password"},"密码",-1)),c(n("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=e=>r.value=e),placeholder:"请输入密码",required:""},null,512),[[v,r.value]])]),s[4]||(s[4]=n("button",{type:"submit",class:"login-button"},"登录",-1))],32),o.value?(l(),a("p",ke,p(o.value),1)):u("",!0)])]))}}),[["__scopeId","data-v-f744616b"]]);class Ve{static async saveFieldMetadata(e){return await ge.post("/dynamic-table/metadata",e)}static async getFieldMetadataByTableKey(e){return await ge.get(`/dynamic-table/metadata/${e}`)}static async deleteFieldMetadata(e){return await ge.delete(`/dynamic-table/metadata/${e}`)}static async saveRecord(e){return await ge.post("/dynamic-table/record",e)}static async getRecordsByTableKey(e){return await ge.get(`/dynamic-table/record/${e}`)}static async getRecordsByTableKeyOrderByCreateTime(e,a="DESC"){return await ge.get(`/dynamic-table/record/${e}/sortByCreateTime`,{params:{orderBy:a}})}static async getRecordsByTableKeyWithPage(e,a=1,l=10){return await ge.get(`/dynamic-table/record/${e}/page`,{params:{page:a,size:l}})}static async getRecordsByTableKeyWithPageOrderByName(e,a=1,l=10){return await ge.get(`/dynamic-table/record/${e}/page/sortByName`,{params:{page:a,size:l}})}static async getRecordsByTableKeyWithPageOrderByCreateTime(e,a=1,l=10,t="DESC"){return await ge.get(`/dynamic-table/record/${e}/page/sortByCreateTime`,{params:{page:a,size:l,orderBy:t}})}static async getRecordById(e){return await ge.get(`/dynamic-table/record/detail/${e}`)}static async deleteRecord(e){return await ge.delete(`/dynamic-table/record/${e}`)}static async deleteRecords(e){return await ge.post("/dynamic-table/record/batch",e)}static async searchByKeyword(e,a){return await ge.get(`/dynamic-table/search/${e}`,{params:{keyword:a}})}static async searchByFieldAndKeyword(e,a,l){return await ge.get(`/dynamic-table/search/${e}/${a}`,{params:{keyword:l}})}static async uploadAvatar(e,a){return await ge.post(`/dynamic-table/record/${e}/avatar`,{avatar:a})}}const Ae=y("dynamicTable",()=>{const e=d("customer"),a=d([]),l=d([]),t=d(null),r=d(null),o=d([]),s=d(!1),n=d(""),u=d(""),i=d(1),c=d(10),v=d(0),p=d(""),m=d("DESC"),y=f(()=>a.value&&a.value.length>0?[...a.value].sort((e,a)=>(e.sortOrder||999)-(a.sortOrder||999)):[]),b=f({get:()=>l.value.length>0&&o.value.length===l.value.length,set:e=>{o.value=e?l.value.map(e=>e.id||0).filter(Boolean):[]}}),w=a=>{e.value=a,_()},_=()=>{a.value=[],l.value=[],t.value=null,r.value=null,o.value=[],n.value="",u.value="",i.value=1,v.value=0,p.value="",m.value="DESC"},x=async l=>{const t=l||e.value;s.value=!0;try{const e=await Ve.getFieldMetadataByTableKey(t);200===e.code&&e.data?a.value=e.data:a.value=[]}catch(r){a.value=[]}finally{s.value=!1}},k=async(a,r)=>{const o=a||i.value,d=r||c.value;i.value=o,s.value=!0;try{const a=await Ve.getRecordsByTableKeyWithPageOrderByName(e.value,o,d);200===a.code&&a.data&&(t.value=a.data,l.value=a.data.items||[],c.value=a.data.size||d,v.value=a.data.totalCount||l.value.length,p.value="name",m.value="ASC")}catch(n){}finally{s.value=!1}},C=async()=>{if(i.value=1,n.value.trim()){s.value=!0;try{const a=n.value.trim(),t=u.value;if(t){const r=await Ve.searchByFieldAndKeyword(e.value,t,a);200===r.code&&r.data&&(l.value=r.data,v.value=r.data.length,l.value.sort((e,a)=>{var l,t,r,o;const s=(null==(t=null==(l=e.data)?void 0:l.name)?void 0:t.charAt(0).toUpperCase())||"",d=(null==(o=null==(r=a.data)?void 0:r.name)?void 0:o.charAt(0).toUpperCase())||"";return s.localeCompare(d)}))}else{const t=await Ve.searchByKeyword(e.value,a);200===t.code&&t.data&&(l.value=t.data,v.value=t.data.length,l.value.sort((e,a)=>{var l,t,r,o;const s=(null==(t=null==(l=e.data)?void 0:l.name)?void 0:t.charAt(0).toUpperCase())||"",d=(null==(o=null==(r=a.data)?void 0:r.name)?void 0:o.charAt(0).toUpperCase())||"";return s.localeCompare(d)}))}const r=0,o=c.value;l.value=l.value.slice(r,o)}catch(a){}finally{s.value=!1}}else await k(1,c.value)},V=e=>{const l={};return a.value.forEach(e=>{l[e.fieldName]=e.fieldLabel}),e.map(e=>{const a={};return e.id&&(a.ID=e.id),e.data&&Object.entries(e.data).forEach(([e,t])=>{const r=l[e]||e;a[r]=null==t?"":"object"==typeof t?JSON.stringify(t):t}),a})};return{currentTableKey:e,metadataList:a,sortedMetadata:y,records:l,pagedRecords:t,currentRecord:r,selectedIds:o,isAllSelected:b,isLoading:s,searchKeyword:n,searchField:u,currentPage:i,pageSize:c,totalRecords:v,sortField:p,sortOrder:m,setCurrentTableKey:w,resetState:_,loadMetadata:x,saveMetadata:async e=>{s.value=!0;try{const a=await Ve.saveFieldMetadata(e);return!(200!==a.code||!a.data)&&(await x(),!0)}catch(a){}finally{s.value=!1}return!1},deleteMetadata:async e=>{s.value=!0;try{const a=await Ve.deleteFieldMetadata(e);return!(200!==a.code||!a.data)&&(await x(),!0)}catch(a){}finally{s.value=!1}return!1},uploadAvatar:async(e,a)=>{s.value=!0;try{const l=await Ve.uploadAvatar(e,a);return!(200!==l.code||!l.data)&&(await k(i.value,c.value),!0)}catch(l){return!1}finally{s.value=!1}},loadRecords:async a=>{const t=a||e.value;s.value=!0;try{const e=await Ve.getRecordsByTableKey(t);200===e.code&&e.data?(l.value=e.data,v.value=e.data.length):(l.value=[],v.value=0),C()}catch(r){}finally{s.value=!1}},loadRecordsOrderByCreateTime:async(a,t="DESC")=>{const r=a||e.value;s.value=!0;try{const e=await Ve.getRecordsByTableKeyOrderByCreateTime(r,t);200===e.code&&e.data?(l.value=e.data,v.value=e.data.length,p.value="createTime",m.value=t):(l.value=[],v.value=0),C()}catch(o){}finally{s.value=!1}},loadRecordsWithPage:async(a,r)=>{const o=a||i.value,d=r||c.value;i.value=o,s.value=!0;try{const a=await Ve.getRecordsByTableKeyWithPage(e.value,o,d);200===a.code&&a.data&&(t.value=a.data,l.value=a.data.items||[],c.value=a.data.size||d,v.value=a.data.totalCount||l.value.length),n.value.trim()&&C()}catch(u){}finally{s.value=!1}},loadRecordsWithPageOrderByName:k,loadRecordsWithPageOrderByCreateTime:async(a,r,o="DESC")=>{const d=a||i.value,n=r||c.value;i.value=d,s.value=!0;try{const a=await Ve.getRecordsByTableKeyWithPageOrderByCreateTime(e.value,d,n,o);200===a.code&&a.data&&(t.value=a.data,l.value=a.data.items||[],c.value=a.data.size||n,v.value=a.data.totalCount||l.value.length,p.value="createTime",m.value=o)}catch(u){}finally{s.value=!1}},setCurrentRecord:e=>{r.value=e?{...e,data:{...e.data}}:null},saveRecord:async a=>{s.value=!0;try{if(!a.id){const l=await Ve.searchByFieldAndKeyword(e.value,"name",a.data.name);if(200===l.code&&l.data&&l.data.length>0&&l.data[0].data.name===a.data.name)return{success:!1,reason:"nameDuplicate"};const t=await Ve.searchByFieldAndKeyword(e.value,"phone",a.data.phone);if(200===t.code&&t.data&&t.data.length>0&&t.data[0].data.phone===a.data.phone)return{success:!1,reason:"phoneDuplicate"}}const l=await Ve.saveRecord(a);if(200===l.code&&l.data){const e=10;return c.value=e,await k(1,e),{success:!0}}return{success:!1,reason:"saveFailed",message:l.msg}}catch(l){return{success:!1,reason:"systemError",message:l instanceof Error?l.message:"系统错误"}}finally{s.value=!1}},deleteRecord:async e=>{s.value=!0;try{const a=await Ve.deleteRecord(e);return!(200!==a.code||!a.data)&&(await k(i.value,10),!0)}catch(a){}finally{s.value=!1}return!1},deleteSelectedRecords:async()=>{if(0===o.value.length)return!1;s.value=!0;try{const e=await Ve.deleteRecords(o.value);return!(200!==e.code||!e.data)&&(await k(i.value,10),o.value=[],!0)}catch(e){}finally{s.value=!1}return!1},toggleSelect:e=>{const a=o.value.indexOf(e);a>-1?o.value.splice(a,1):o.value.push(e)},setSearchParams:(e,a="")=>{n.value=e,u.value=a,i.value=1,C()},applySearch:C,initTable:async e=>{w(e),await Promise.all([x(),k(1,10)])},exportCurrentPageData:async()=>{s.value=!0;try{const t=V(l.value),r=g.json_to_sheet(t),o=g.book_new();g.book_append_sheet(o,r,e.value);const s=g.json_to_sheet(a.value.map(e=>({"字段名称":e.fieldName,"字段标签":e.fieldLabel,"字段类型":e.fieldType,"是否必填":e.required?"是":"否","默认值":e.defaultValue||"-","最大长度":e.maxLength||"-","排序":e.sortOrder||999})));return g.book_append_sheet(o,s,"表结构信息"),h(o,`${e.value}_数据_${(new Date).toLocaleDateString("zh-CN").replace(/\//g,"-")}.xlsx`),!0}catch(t){return!1}finally{s.value=!1}},exportAllData:async()=>{s.value=!0;try{let l=[];if(n.value.trim()){const a=u.value?await Ve.searchByFieldAndKeyword(e.value,u.value,n.value):await Ve.searchByKeyword(e.value,n.value);200===a.code&&a.data&&(l=a.data,l.sort((e,a)=>{var l,t,r,o;const s=(null==(t=null==(l=e.data)?void 0:l.name)?void 0:t.charAt(0).toUpperCase())||"",d=(null==(o=null==(r=a.data)?void 0:r.name)?void 0:o.charAt(0).toUpperCase())||"";return s.localeCompare(d)}))}else{const a=await Ve.getRecordsByTableKey(e.value);200===a.code&&a.data&&(l=a.data.sort((e,a)=>{var l,t,r,o;const s=(null==(t=null==(l=e.data)?void 0:l.name)?void 0:t.charAt(0).toUpperCase())||"",d=(null==(o=null==(r=a.data)?void 0:r.name)?void 0:o.charAt(0).toUpperCase())||"";return s.localeCompare(d)}))}const t=V(l),r=g.json_to_sheet(t),o=g.book_new();g.book_append_sheet(o,r,e.value);const s=g.json_to_sheet(a.value.map(e=>({"字段名称":e.fieldName,"字段标签":e.fieldLabel,"字段类型":e.fieldType,"是否必填":e.required?"是":"否","默认值":e.defaultValue||"-","最大长度":e.maxLength||"-","排序":e.sortOrder||999})));return g.book_append_sheet(o,s,"表结构信息"),h(o,`${e.value}_全量数据_${(new Date).toLocaleDateString("zh-CN").replace(/\//g,"-")}.xlsx`),!0}catch(l){return!1}finally{s.value=!1}},exportSelectedData:async()=>{if(0===o.value.length)return!1;s.value=!0;try{const a=l.value.filter(e=>e.id&&o.value.includes(e.id)),t=V(a),r=g.json_to_sheet(t),s=g.book_new();return g.book_append_sheet(s,r,e.value),h(s,`${e.value}_选中数据_${(new Date).toLocaleDateString("zh-CN").replace(/\//g,"-")}.xlsx`),!0}catch(a){return!1}finally{s.value=!1}}}}),Ne={class:"search-panel py-6 border-b"},Te={class:"sort-container",style:{display:"flex","align-items":"center","margin-bottom":"10px"}},Re={class:"table-wrapper py-4"},Se={key:0,class:"table-avatar"},Be=["src"],Oe={class:"action-buttons"},Ue={key:0,class:"pagination"},Me={class:"pagination-info"},Le={class:"avatar-upload-container"},Pe={key:0,class:"avatar-preview"},De=["src"],Ke={key:0},$e={key:1},ze={key:2},Ee={key:3},qe={key:4},Ie={key:5},je={key:6},Fe={class:"dialog-footer"},We={class:"text-center py-4"},Je={class:"dialog-footer"},Ye={class:"text-center py-4"},Ze={class:"dialog-footer"},He=ye(e({__name:"DynamicTable",setup(e){const r=Ae(),o=f(()=>r.records),s=f(()=>r.sortedMetadata),v=f(()=>r.isLoading),m=f(()=>r.selectedIds),y=f(()=>r.currentPage),g=f(()=>r.pageSize),h=f(()=>r.totalRecords),re=d(!1),oe=d(!1),se=d(!1),de=d(!1),ne=d(null),ue=d(""),ie=d(""),ce=d(""),ve=d(!1),pe=d(!1),me=f({get:()=>re.value||oe.value,set:e=>{e||(re.value=!1,oe.value=!1)}}),ye=b({});f({get:()=>r.isAllSelected,set:e=>{r.isAllSelected=e}});const fe=async()=>{await r.exportCurrentPageData()||alert("导出当前页数据失败，请重试")},ge=async()=>{if(h.value>100&&!confirm(`确定要导出全部 ${h.value} 条数据吗？这可能需要一些时间。`))return;await r.exportAllData()||alert("导出所有数据失败，请重试")},he=async()=>{await r.exportSelectedData()||alert("导出选中数据失败，请重试")},be=f(()=>Math.ceil(r.totalRecords/r.pageSize)),we=e=>{try{return e.startsWith("[")?JSON.parse(e):JSON.parse(`[${e}]`)}catch{return[]}},_e=()=>{ve.value=!0,r.setSearchParams(ue.value,ie.value)},xe=()=>{ue.value="",ie.value="",ve.value=!1,r.setSearchParams("","")},ke=e=>{e<1||e>be.value||"name"!==ce.value&&""!==ce.value||r.loadRecordsWithPageOrderByName(e,g.value)},Ce=async()=>{"name"!==ce.value&&""!==ce.value||await r.loadRecordsWithPageOrderByName(y.value,g.value)},Ve=async e=>{try{const a=e.raw;if(!a.type.startsWith("image/"))return void alert("请上传图片文件");if(!(a.size/1024/1024<2))return void alert("上传头像图片大小不能超过 2MB!");const l=new FileReader;l.readAsDataURL(a),l.onload=async()=>{var e;const a=l.result;if(null==(e=r.currentRecord)?void 0:e.id){await r.uploadAvatar(r.currentRecord.id.toString(),a)?ye.avatar=a:alert("头像更新失败，请重试")}else ye.avatar=a},l.onerror=()=>{alert("图片读取失败，请重试")}}catch(a){alert("处理头像失败，请重试")}},He=()=>{de.value=!0},Ge=()=>{re.value=!1,oe.value=!1,pe.value=!1,ea()},Qe=()=>{se.value=!1,ne.value=null},Xe=()=>{de.value=!1},ea=()=>{Object.keys(ye).forEach(e=>{delete ye[e]}),pe.value||(r.sortedMetadata.forEach(e=>{e.defaultValue&&(ye[e.fieldName]=e.defaultValue)}),ye.avatar="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==")},aa=async()=>{var e;const a={...ye},l={tableKey:r.currentTableKey,data:a};(null==(e=r.currentRecord)?void 0:e.id)&&(l.id=r.currentRecord.id);const t=await r.saveRecord(l);t.success?(Ge(),r.setCurrentRecord(null)):"nameDuplicate"===t.reason?alert("名称已存在"):"phoneDuplicate"===t.reason?alert("手机号已存在"):alert(t.message||"保存失败，请重试")},la=async()=>{var e;if(null==(e=ne.value)?void 0:e.id){await r.deleteRecord(ne.value.id)?Qe():alert("删除失败，请重试")}},ta=async()=>{await r.deleteSelectedRecords()?Xe():alert("删除失败，请重试")},ra=e=>{r.pageSize=e,r.currentPage=1,"name"!==ce.value&&""!==ce.value||r.loadRecordsWithPageOrderByName(1,e)},oa=e=>{const a=e.map(e=>e.id||0).filter(e=>0!==e);r.selectedIds=a};return w(()=>{r.initTable("customer")}),(e,d)=>{const f=A,b=V,w=C,ve=S,Ae=M,sa=k,da=L,na=q,ua=E,ia=K,ca=j,va=I,pa=W,ma=H,ya=Z,fa=G,ga=Q,ha=X,ba=ae,wa=ee,_a=Y,xa=J,ka=le,Ca=te,Va=F;return l(),_(Ca,{class:"dynamic-table-container",shadow:"hover","body-style":{padding:"0 20px 20px"}},{default:x(()=>[n("div",Ne,[t(sa,{gutter:10,type:"flex",align:"middle"},{default:x(()=>[t(w,{lg:16,xs:24},{default:x(()=>[t(sa,{gutter:10,type:"flex",align:"middle"},{default:x(()=>[t(w,{xs:24,sm:8},{default:x(()=>[t(b,{modelValue:ie.value,"onUpdate:modelValue":d[0]||(d[0]=e=>ie.value=e),placeholder:"所有字段",class:"search-field w-full"},{default:x(()=>[t(f,{value:""},{default:x(()=>[...d[7]||(d[7]=[N("所有字段",-1)])]),_:1}),(l(!0),a(T,null,R(s.value,e=>(l(),_(f,{key:e.fieldName,value:e.fieldName},{default:x(()=>[N(p(e.fieldLabel),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{xs:24,sm:16},{default:x(()=>[t(ve,{modelValue:ue.value,"onUpdate:modelValue":d[1]||(d[1]=e=>ue.value=e),placeholder:"请输入搜索关键词",class:"search-input",onKeyup:U(_e,["enter"]),"suffix-icon":B(O),style:{"margin-bottom":"8px"}},null,8,["modelValue","suffix-icon"])]),_:1}),t(w,{xs:12,sm:6},{default:x(()=>[t(Ae,{type:"primary",onClick:_e,class:"w-full search-button"},{default:x(()=>[...d[8]||(d[8]=[N(" 搜索 ",-1)])]),_:1})]),_:1}),ue.value?(l(),_(w,{key:0,xs:12,sm:6},{default:x(()=>[t(Ae,{onClick:xe,class:"w-full"},{default:x(()=>[...d[9]||(d[9]=[N(" 重置 ",-1)])]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1}),t(w,{lg:8,xs:24,class:"mt-2 lg:mt-0"},{default:x(()=>[n("div",Te,[t(b,{modelValue:ce.value,"onUpdate:modelValue":d[2]||(d[2]=e=>ce.value=e),placeholder:"默认（姓名首字母A-Z）",style:{width:"180px","margin-right":"10px"}},{default:x(()=>[t(f,{value:"",label:"默认（姓名首字母A-Z）"}),t(f,{value:"name",label:"姓名首字母A-Z"})]),_:1},8,["modelValue"]),t(Ae,{onClick:Ce,size:"small"},{default:x(()=>[...d[10]||(d[10]=[N("应用排序",-1)])]),_:1})]),t(Ae,{type:"success",onClick:d[3]||(d[3]=e=>(ea(),pe.value=!1,void(re.value=!0))),class:"w-full lg:w-auto lg:float-right mb-2 lg:mb-0 lg:mr-2"},{default:x(()=>[t(da,null,{default:x(()=>[t(B(P))]),_:1}),d[11]||(d[11]=N(" 新增记录 ",-1))]),_:1}),t(Ae,{type:"danger",onClick:He,disabled:0===m.value.length,class:"w-full lg:w-auto lg:float-right mb-2 lg:mb-0 lg:mr-2"},{default:x(()=>[t(da,null,{default:x(()=>[t(B(D))]),_:1}),N(" 批量删除 ("+p(m.value.length)+") ",1)]),_:1},8,["disabled"]),t(ia,{class:"w-full lg:w-auto lg:float-right"},{dropdown:x(()=>[t(ua,null,{default:x(()=>[t(na,{onClick:fe},{default:x(()=>[...d[13]||(d[13]=[N(" 导出当前页 ",-1)])]),_:1}),t(na,{onClick:ge},{default:x(()=>[...d[14]||(d[14]=[N(" 导出所有数据 ",-1)])]),_:1}),m.value.length>0?(l(),_(na,{key:0,onClick:he},{default:x(()=>[N(" 导出选中数据 ("+p(m.value.length)+") ",1)]),_:1})):u("",!0)]),_:1})]),default:x(()=>[t(Ae,{type:"primary",class:"w-full"},{default:x(()=>[t(da,null,{default:x(()=>[t(B($))]),_:1}),d[12]||(d[12]=N(" 导出 ",-1)),t(da,{class:"el-icon--right"},{default:x(()=>[t(B(z))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),n("div",Re,[v.value?u("",!0):c((l(),_(va,{key:0,data:o.value,style:{width:"100%"},border:"","element-loading-text":"加载中...","header-cell-style":{"white-space":"nowrap"},onSelectionChange:oa},{default:x(()=>[t(ca,{type:"selection",width:"55"}),t(ca,{label:"头像*",width:"100","header-align":"center",align:"center"},{default:x(e=>[e.row.data.avatar?(l(),a("div",Se,[n("img",{src:e.row.data.avatar,alt:"头像",class:"avatar-image"},null,8,Be)])):u("",!0)]),_:1}),t(ca,{prop:"data.name",label:"姓名*","show-overflow-tooltip":!0,"header-align":"left"}),t(ca,{prop:"data.phone",label:"电话*","show-overflow-tooltip":!0,"header-align":"left"}),t(ca,{label:"操作",width:"120",fixed:"right"},{default:x(e=>[n("div",Oe,[t(Ae,{type:"success",size:"small",onClick:a=>{return l=e.row,r.setCurrentRecord(l),ea(),l.data&&Object.entries(l.data).forEach(([e,a])=>{null!=a&&""!==a&&(ye[e]=a)}),pe.value=!0,void(oe.value=!0);var l}},{default:x(()=>[...d[15]||(d[15]=[N(" 查看 ",-1)])]),_:1},8,["onClick"]),t(Ae,{type:"primary",size:"small",onClick:a=>{return l=e.row,r.setCurrentRecord(l),ea(),l.data&&Object.assign(ye,{...l.data}),void(oe.value=!0);var l}},{default:x(()=>[...d[16]||(d[16]=[N(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(Ae,{type:"danger",size:"small",onClick:a=>{return l=e.row,ne.value=l,void(se.value=!0);var l}},{default:x(()=>[...d[17]||(d[17]=[N(" 删除 ",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Va,v.value]])]),!v.value&&h.value>0?(l(),a("div",Ue,[t(sa,{type:"flex",justify:"space-between",align:"middle"},{default:x(()=>[t(w,{xs:24,sm:12,class:"text-center sm:text-left"},{default:x(()=>[n("span",Me," 共 "+p(h.value)+" 条记录，当前第 "+p(y.value)+" / "+p(be.value)+" 页 ",1)]),_:1}),t(w,{xs:24,sm:12,class:"mt-2 sm:mt-0"},{default:x(()=>[t(pa,{background:"",layout:"prev, pager, next, sizes",total:h.value,"page-size":g.value,"current-page":y.value,onCurrentChange:ke,onSizeChange:ra,"page-sizes":[10,20,50],style:{float:"right"}},null,8,["total","page-size","current-page"])]),_:1})]),_:1})])):u("",!0),t(xa,{modelValue:me.value,"onUpdate:modelValue":d[4]||(d[4]=e=>me.value=e),title:pe.value?"查看记录":oe.value?"编辑记录":"新增记录",width:"70%","destroy-on-close":"","before-close":Ge},{footer:x(()=>[n("span",Fe,[t(Ae,{onClick:Ge},{default:x(()=>[...d[20]||(d[20]=[N("取消",-1)])]),_:1}),pe.value?u("",!0):(l(),_(Ae,{key:0,type:"primary",onClick:aa},{default:x(()=>[...d[21]||(d[21]=[N("确定",-1)])]),_:1}))])]),default:x(()=>[t(_a,{onSubmit:i(aa,["prevent"]),model:ye,"label-width":"120px",size:"default",disabled:pe.value},{default:x(()=>[t(ya,{label:"头像*",class:"mb-4",rules:pe.value?[]:[{required:!0,message:"请上传头像",trigger:"blur"}]},{default:x(()=>[n("div",Le,[ye.avatar?(l(),a("div",Pe,[n("img",{src:ye.avatar,alt:"头像预览",class:"avatar-image"},null,8,De)])):u("",!0),pe.value?u("",!0):(l(),_(ma,{key:1,action:"","show-file-list":!1,"on-change":Ve,"auto-upload":!1,accept:"image/*"},{default:x(()=>[ye.avatar?(l(),_(Ae,{key:1,type:"warning"},{default:x(()=>[...d[19]||(d[19]=[N(" 更换头像 ",-1)])]),_:1})):(l(),_(Ae,{key:0,type:"primary",icon:"Upload"},{default:x(()=>[...d[18]||(d[18]=[N(" 上传头像 ",-1)])]),_:1}))]),_:1}))])]),_:1},8,["rules"]),(l(!0),a(T,null,R(s.value,e=>(l(),a(T,{key:e.fieldName},["avatar"!==e.fieldName?(l(),_(ya,{key:0,label:`${e.fieldLabel}${e.required?"*":""}`,prop:e.fieldName,rules:!pe.value&&e.required?[{required:!0,message:`请输入${e.fieldLabel}`,trigger:"blur"}]:[],class:"mb-4"},{default:x(()=>["text"===e.fieldType?(l(),a("div",Ke,[t(ve,{modelValue:ye[e.fieldName],"onUpdate:modelValue":a=>ye[e.fieldName]=a,placeholder:pe.value&&!ye[e.fieldName]?"":e.placeholder||`请输入${e.fieldLabel}`,maxlength:e.maxLength||200,"show-word-limit":"",clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder","maxlength"])])):"number"===e.fieldType?(l(),a("div",$e,[t(fa,{modelValue:ye[e.fieldName],"onUpdate:modelValue":a=>ye[e.fieldName]=a,modelModifiers:{number:!0},placeholder:pe.value&&!ye[e.fieldName]?"":e.placeholder||`请输入${e.fieldLabel}`,min:e.min||0,max:e.max||99999999,precision:e.decimalPlaces||0},null,8,["modelValue","onUpdate:modelValue","placeholder","min","max","precision"])])):"date"===e.fieldType?(l(),a("div",ze,[t(ga,{modelValue:ye[e.fieldName],"onUpdate:modelValue":a=>ye[e.fieldName]=a,type:"date",placeholder:pe.value&&!ye[e.fieldName]?"":"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])):"textarea"===e.fieldType?(l(),a("div",Ee,[t(ve,{modelValue:ye[e.fieldName],"onUpdate:modelValue":a=>ye[e.fieldName]=a,type:"textarea",placeholder:pe.value&&!ye[e.fieldName]?"":e.placeholder||`请输入${e.fieldLabel}`,rows:4,maxlength:e.maxLength||1e3,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","placeholder","maxlength"])])):"select"===e.fieldType&&e.options?(l(),a("div",qe,[t(b,{modelValue:ye[e.fieldName],"onUpdate:modelValue":a=>ye[e.fieldName]=a,placeholder:pe.value&&!ye[e.fieldName]?"":"请选择",clearable:""},{default:x(()=>[(l(!0),a(T,null,R(we(e.options),e=>(l(),_(f,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):"checkbox"===e.fieldType?(l(),a("div",Ie,[t(ha,{modelValue:ye[e.fieldName],"onUpdate:modelValue":a=>ye[e.fieldName]=a},{default:x(()=>[N(p(e.placeholder||e.fieldLabel),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):"radio"===e.fieldType&&e.options?(l(),a("div",je,[t(wa,{modelValue:ye[e.fieldName],"onUpdate:modelValue":a=>ye[e.fieldName]=a},{default:x(()=>[(l(!0),a(T,null,R(we(e.options),e=>(l(),_(ba,{key:e.value,label:e.value},{default:x(()=>[N(p(e.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):u("",!0)]),_:2},1032,["label","prop","rules"])):u("",!0)],64))),128))]),_:1},8,["model","disabled"])]),_:1},8,["modelValue","title"]),t(xa,{modelValue:se.value,"onUpdate:modelValue":d[5]||(d[5]=e=>se.value=e),title:"确认删除",width:"500px","before-close":Qe,"destroy-on-close":""},{footer:x(()=>[n("span",Je,[t(Ae,{onClick:Qe},{default:x(()=>[...d[23]||(d[23]=[N("取消",-1)])]),_:1}),t(Ae,{type:"danger",onClick:la},{default:x(()=>[...d[24]||(d[24]=[N("确认删除",-1)])]),_:1})])]),default:x(()=>[n("div",We,[t(ka,{title:"警告",type:"warning",closable:!1,class:"mb-4"},{default:x(()=>[...d[22]||(d[22]=[n("p",null,"确定要删除这条记录吗？",-1),n("p",{class:"text-danger"},"删除后数据将无法恢复！",-1)])]),_:1})])]),_:1},8,["modelValue"]),t(xa,{modelValue:de.value,"onUpdate:modelValue":d[6]||(d[6]=e=>de.value=e),title:"批量删除",width:"500px","before-close":Xe,"destroy-on-close":""},{footer:x(()=>[n("span",Ze,[t(Ae,{onClick:Xe},{default:x(()=>[...d[26]||(d[26]=[N("取消",-1)])]),_:1}),t(Ae,{type:"danger",onClick:ta},{default:x(()=>[...d[27]||(d[27]=[N("确认删除",-1)])]),_:1})])]),default:x(()=>[n("div",Ye,[t(ka,{title:"警告",type:"warning",closable:!1,class:"mb-4"},{default:x(()=>[n("p",null,"确定要删除选中的 "+p(m.value.length)+" 条记录吗？",1),d[25]||(d[25]=n("p",{class:"text-danger"},"删除后数据将无法恢复！",-1))]),_:1})])]),_:1},8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-b2bc3a2e"]]),Ge={class:"dynamic-table-manager"},Qe={class:"header"},Xe={key:0,class:"metadata-list"},ea={key:0,class:"empty-state"},aa=["title"],la={class:"metadata-info"},ta={class:"field-label"},ra={class:"field-detail"},oa={class:"field-name"},sa={class:"field-type"},da={key:0,class:"required-tag"},na={class:"metadata-actions"},ua=["onClick"],ia=["onClick"],ca=["onMousedown"],va={key:1,class:"loading"},pa={class:"modal-content"},ma={class:"modal-header"},ya={class:"modal-body"},fa={class:"form-group"},ga={class:"form-group"},ha={class:"form-group"},ba={key:0,class:"form-group"},wa={class:"form-group"},_a={class:"form-group"},xa={class:"form-group check-box"},ka={class:"form-group"},Ca={class:"modal-content"},Va={class:"modal-body"},Aa=ye(e({__name:"DynamicTableManager",setup(e){const t=Ae(),r=d(!1),o=d(!1),s=d(!1),m=d(null),y=d(!1),g=d(null),h=d(!1),w=f(()=>{const e={};return t.sortedMetadata.forEach(a=>{if(a.sortOrder){const l=a.sortOrder;e[l]=(e[l]||0)+1}}),Object.keys(e).map(Number).filter(a=>e[a]>1)}),_=b({fieldLabel:"",fieldName:"",fieldType:"text",placeholder:"",required:!1,regex:"",options:"",sortOrder:999,defaultValue:""}),x=()=>{r.value=!1,o.value=!1,C()},k=()=>{s.value=!1,m.value=null},C=()=>{_.fieldLabel="",_.fieldName="",_.fieldType="text",_.placeholder="",_.required=!1,_.regex="",_.options="",_.sortOrder=999,_.defaultValue="",delete _.id},V=async()=>{if(_.options&&("select"===_.fieldType||"checkbox"===_.fieldType||"radio"===_.fieldType))try{JSON.parse(`[${_.options}]`)}catch(e){return void alert("选项配置格式错误，请输入有效的JSON数组格式")}_.tableKey="customer";await t.saveMetadata(_)?x():alert("保存失败，请重试")},A=async()=>{var e;if(null==(e=m.value)?void 0:e.id){await t.deleteMetadata(m.value.id)?k():alert("删除失败，请重试")}};return t.loadMetadata(),(e,d)=>{var f;return l(),a("div",Ge,[n("div",Qe,[d[10]||(d[10]=n("h2",null,"表头管理",-1)),n("button",{class:"btn-add",onClick:d[0]||(d[0]=e=>r.value=!0)},[...d[9]||(d[9]=[n("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M8 2V14M2 8H14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),N(" 新增字段 ",-1)])])]),h.value?u("",!0):(l(),a("div",Xe,[0===B(t).sortedMetadata.length?(l(),a("div",ea,' 暂无字段，请点击"新增字段"添加 ')):u("",!0),(l(!0),a(T,null,R(B(t).sortedMetadata,e=>{return l(),a("div",{class:de(["metadata-item",{"duplicate-sort":void 0!==e.sortOrder&&w.value.includes(e.sortOrder)}]),key:e.id,title:void 0!==e.sortOrder&&w.value.includes(e.sortOrder)?"显示顺序冲突，请修改":""},[n("div",la,[n("div",ta,p(e.fieldLabel),1),n("div",ra,[n("span",oa,p(e.fieldName),1),n("span",sa,p((r=e.fieldType,{text:"文本",number:"数字",select:"下拉选择",date:"日期",textarea:"多行文本",checkbox:"复选框",radio:"单选框"}[r]||r)),1),e.required?(l(),a("span",da,"必填")):u("",!0)])]),n("div",na,[n("button",{class:"btn-edit",onClick:a=>{return l=e,Object.assign(_,{...l}),void(o.value=!0);var l}}," 编辑 ",8,ua),n("button",{class:"btn-delete",onClick:a=>{return l=e,m.value=l,void(s.value=!0);var l}}," 删除 ",8,ia),n("div",{class:"sort-handle",onMousedown:a=>((e,a)=>{y.value=!0,g.value=a,e.preventDefault();const l=e=>{y.value},r=e=>{if(!y.value||!g.value)return;y.value=!1;const a=document.elementFromPoint(e.clientX,e.clientY),o=null==a?void 0:a.closest(".metadata-item");if(o){const e=Array.from(document.querySelectorAll(".metadata-item")).indexOf(o);if(-1!==e){const a=[...t.sortedMetadata],l=a.findIndex(e=>{var a;return e.id===(null==(a=g.value)?void 0:a.id)});if(-1!==l){const[r]=a.splice(l,1);a.splice(e,0,r),a.forEach((e,a)=>{e.sortOrder=a+1}),a.forEach(async e=>{await t.saveMetadata(e)})}}}document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",r)})(a,e)},[...d[11]||(d[11]=[n("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M4 6V8M12 6V8M4 10V12M12 10V12M4 2V4M12 2V4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])],40,ca)])],10,aa);var r}),128))])),h.value?(l(),a("div",va," 加载中... ")):u("",!0),r.value||o.value?(l(),a("div",{key:2,class:"modal",onClick:i(x,["self"])},[n("div",pa,[n("div",ma,[n("h3",null,p(o.value?"编辑字段":"新增字段"),1),n("button",{class:"modal-close",onClick:x},"×")]),n("div",ya,[n("form",{onSubmit:i(V,["prevent"])},[n("div",fa,[d[12]||(d[12]=n("label",null,"字段标签 *",-1)),c(n("input",{type:"text","onUpdate:modelValue":d[1]||(d[1]=e=>_.fieldLabel=e),required:"",placeholder:"例如：姓名"},null,512),[[v,_.fieldLabel]])]),n("div",ga,[d[13]||(d[13]=n("label",null,"字段名 *",-1)),c(n("input",{type:"text","onUpdate:modelValue":d[2]||(d[2]=e=>_.fieldName=e),required:"",placeholder:"例如：name",pattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",title:"字段名只能包含字母、数字和下划线，且不能以数字开头"},null,512),[[v,_.fieldName]]),d[14]||(d[14]=n("small",null,"本字段的英文名，只能包含字母、数字和下划线，且不能以数字开头",-1))]),n("div",ha,[d[16]||(d[16]=n("label",null,"字段类型 *",-1)),c(n("select",{"onUpdate:modelValue":d[3]||(d[3]=e=>_.fieldType=e),required:""},[...d[15]||(d[15]=[oe('<option value="text" data-v-c28c4202>文本</option><option value="number" data-v-c28c4202>数字</option><option value="select" data-v-c28c4202>下拉选择</option><option value="date" data-v-c28c4202>日期</option><option value="textarea" data-v-c28c4202>多行文本</option><option value="checkbox" data-v-c28c4202>复选框</option><option value="radio" data-v-c28c4202>单选框</option>',7)])],512),[[re,_.fieldType]])]),"select"===_.fieldType||"checkbox"===_.fieldType||"radio"===_.fieldType?(l(),a("div",ba,[d[17]||(d[17]=n("label",null,"选项配置",-1)),c(n("textarea",{"onUpdate:modelValue":d[4]||(d[4]=e=>_.options=e),placeholder:"格式示例: {label: '选项1', value: '1'}",rows:"3"},null,512),[[v,_.options]]),d[18]||(d[18]=n("small",null,"JSON数组格式，每个对象包含label和value字段",-1))])):u("",!0),n("div",wa,[d[19]||(d[19]=n("label",null,"占位提示",-1)),c(n("input",{type:"text","onUpdate:modelValue":d[5]||(d[5]=e=>_.placeholder=e),placeholder:"输入提示文本"},null,512),[[v,_.placeholder]])]),n("div",_a,[d[20]||(d[20]=n("label",null,"默认值",-1)),c(n("input",{type:"text","onUpdate:modelValue":d[6]||(d[6]=e=>_.defaultValue=e),placeholder:"设置默认值"},null,512),[[v,_.defaultValue]])]),n("div",xa,[d[21]||(d[21]=n("label",null,"必填字段",-1)),c(n("input",{type:"checkbox","onUpdate:modelValue":d[7]||(d[7]=e=>_.required=e)},null,512),[[se,_.required]])]),n("div",ka,[d[22]||(d[22]=n("label",null,"显示顺序",-1)),c(n("input",{type:"number","onUpdate:modelValue":d[8]||(d[8]=e=>_.sortOrder=e),min:"1",placeholder:"数字越小越靠前"},null,512),[[v,_.sortOrder]])]),n("div",{class:"form-actions"},[n("button",{type:"button",class:"btn-cancel",onClick:x},"取消"),d[23]||(d[23]=n("button",{type:"submit",class:"btn-submit"},"保存",-1))])],32)])])])):u("",!0),s.value?(l(),a("div",{key:3,class:"modal",onClick:i(k,["self"])},[n("div",Ca,[n("div",{class:"modal-header"},[d[24]||(d[24]=n("h3",null,"确认删除",-1)),n("button",{class:"modal-close",onClick:k},"×")]),n("div",Va,[n("p",null,'确定要删除字段 "'+p(null==(f=m.value)?void 0:f.fieldLabel)+'" 吗？',1),d[25]||(d[25]=n("p",{class:"warning"},"删除后，该字段的数据将无法恢复！",-1)),n("div",{class:"form-actions"},[n("button",{type:"button",class:"btn-cancel",onClick:k},"取消"),n("button",{type:"button",class:"btn-delete-confirm",onClick:A},"确认删除")])])])])):u("",!0)])}}}),[["__scopeId","data-v-c28c4202"]]),Na={class:"dynamic-table-app min-h-screen bg-gray-100 p-4"},Ta={class:"max-w-7xl mx-auto"},Ra={class:"bg-white rounded-lg shadow mb-6"},Sa={class:"flex border-b"},Ba={class:"p-4"},Oa={key:0},Ua={key:1},Ma=[{path:"/",redirect:"/login"},{path:"/login",component:Ce},{path:"/index",component:ye(e({__name:"index",setup(e){const r=d("data"),o=m(),s=async()=>{try{await he.logout(),localStorage.removeItem("token"),o.push("/login")}catch(e){localStorage.removeItem("token"),o.push("/login")}};return(e,o)=>(l(),a(T,null,[n("div",{class:"float-right p-4 flex justify-between items-center mb-6 top-0 right-0"},[n("div",{class:"user-info"},[o[2]||(o[2]=n("span",null,"Admin",-1)),n("button",{onClick:s,class:"ml-2 bg-red-500 text-white px-4 py-2 rounded-md shadow hover:bg-red-600 transition"},"退出登录")])]),n("div",Na,[n("div",Ta,[o[3]||(o[3]=n("header",{class:"mb-8"},[n("h1",{class:"text-2xl font-bold text-gray-800 mb-2"},"客户管理系统"),n("p",{class:"text-gray-600"},"基于动态表设计的客户信息管理平台")],-1)),n("div",Ra,[n("div",Sa,[n("button",{class:de(["px-6 py-3 font-medium text-sm",{"border-b-2 border-blue-500 text-blue-500":"data"===r.value}]),onClick:o[0]||(o[0]=e=>r.value="data")}," 数据管理 ",2),n("button",{class:de(["px-6 py-3 font-medium text-sm",{"border-b-2 border-blue-500 text-blue-500":"metadata"===r.value}]),onClick:o[1]||(o[1]=e=>r.value="metadata")}," 表头管理 ",2)]),n("div",Ba,["data"===r.value?(l(),a("div",Oa,[t(He)])):u("",!0),"metadata"===r.value?(l(),a("div",Ua,[t(Aa)])):u("",!0)])]),o[4]||(o[4]=n("div",{class:"bg-white rounded-lg shadow p-6"},[n("h2",{class:"text-lg font-semibold mb-4"},"系统说明"),n("div",{class:"space-y-3 text-sm text-gray-600"},[n("p",null,"• 本系统采用元数据驱动的动态表设计，可以自由增删改表头字段，无需修改数据库结构。"),n("p",null,"• 表头管理：可添加、编辑、删除和排序表字段，支持多种字段类型（文本、数字、日期、选择框等）。"),n("p",null,"• 数据管理：可对客户数据进行增删改查，支持搜索、分页和批量操作功能。"),n("p",null,"• 数据存储：表内容以JSON格式存储，确保表头变更时兼容新旧数据的查询和展示。")])],-1))])])],64))}}),[["__scopeId","data-v-82638339"]])}],La=ne({history:ue(),routes:Ma});La.beforeEach((e,a,l)=>{const t=localStorage.getItem("token");t||"/login"===e.path?t&&"/login"===e.path?l("/index"):l():l("/login")});const Pa=ie(),Da=ce(fe);Da.use(La),Da.use(Pa),Da.use(ve,{locale:pe}),Da.mount("#app");
